datasource db {
  provider = "mongodb"
  url      = "mongodb+srv://test:test@cluster0.u1ngp.mongodb.net/read-line?retryWrites=true&w=majority"
}

generator client {
  provider = "prisma-client-js"
}

model User {
  id       String    @id @default(auto()) @map("_id") @db.ObjectId
  email    String    @unique
  password String
  Message  Message[]

  @@map("user")
}

model Message {
  id          String   @id @default(auto()) @map("_id") @db.ObjectId
  isResponse  Boolean  @default(false) @map("is_response")
  isSummary   Boolean  @default(false) @map("is_summary")
  text        String
  createdAt   DateTime @default(now()) @map("created_at")
  rating      Int?
  correct     String?
  explanation String?
  translation String?

  presetId String?  @map("preset_id") @db.ObjectId
  preset   Presets? @relation(fields: [presetId], references: [id])

  userId String @map("user_id") @db.ObjectId
  user   User   @relation(fields: [userId], references: [id])

  @@map("message")
}

enum PresetType {
  ACTUAL_TOPIC
  PERSON
  CONFLICT_SITUATION
}

enum EnglishLevelType {
  A1
  A2
  B1
  B2
  C1
}

enum ConversationStyleType {
  Buisness
  Casual
}

model Presets {
  id                String                @id @default(auto()) @map("_id") @db.ObjectId
  type              PresetType
  englishLevel      EnglishLevelType
  conversetionStyle ConversationStyleType
  nameForAiService  String                @map("name_for_ai_service")
  title             String
  createdAt         DateTime              @default(now()) @map("created_at")
  imageUrl          String?               @map("image_url")
  Message           Message[]
}
